{% extends 'core/base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}


<h1 class="mb-6 text-3xl">{{ title }}</h1>

<form method="post" action="." enctype="multipart/form-data">
    {% csrf_token %}

    <div class="space-y-4">
        {{ form.as_p }}
        <input type="hidden" id="id_latitude" name="latitude">
        <input type="hidden" id="id_longitude" name="longitude">
    </div>

    {% if form.errors or form.non_field_errors %}
        <div class="mb-3 p-6 bg-red-100 rounded-xl">
            {% for field in form %}
                {{ field.errors }}
            {% endfor %}

            {{ form.non_field_errors }}
        </div>
    {% endif %}
<div class="text-center">
    <button class="mt-6 bg-rose-400 hover:bg-rose-500 text-white py-2 px-4 rounded-full">送信する</button>
</div>
    
</form>
<script>
    navigator.geolocation.getCurrentPosition(successCallback);
    
    function successCallback(position) {
        let latitude = position.coords.latitude;
        let longitude = position.coords.longitude;
        document.getElementById('id_latitude').value = latitude;
        document.getElementById('id_longitude').value = longitude;
    }
    </script>
{% endblock %}